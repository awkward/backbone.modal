(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};!function(a,b){var c;if("object"==typeof exports)return c=require("marionette"),module.exports=b(c);if("function"==typeof define&&define.amd)return define(["marionette"],b);if("undefined"==typeof Backbone||null===Backbone)throw new Error("Backbone is not defined. Please include the latest version from http://documentcloud.github.com/backbone/backbone.js");if(null==Backbone.Marionette)throw new Error("Backbone.Marionette is not defined. Please include the latest version from http://marionettejs.com/downloads/backbone.marionette.js");return b(Backbone.Marionette)}(this,function(b){var d;return b.Modals=function(e){function f(){return this.close=a(this.close,this),d=f.__super__.constructor.apply(this,arguments)}return c(f,e),f.prototype.modals=[],f.prototype.zIndex=0,f.prototype.show=function(a,c){var d,e,f,g,h,i,j,k,l,m;if(this.ensureEl(),this.modals.length>0&&(d=_.last(this.modals),d.modalEl.addClass(""+d.prefix+"-modal--stacked"),f=this.modals[this.modals.length-1],null!=f&&f.modalEl.removeClass(""+f.prefix+"-modal--stacked-reverse")),a.render(c),a.regionEnabled=!0,this.$el.show(),this.$el.append(a.el),this.modals.length>0)for(l=this.modals,h=0,j=l.length;j>h;h++)g=l[h],g.$el.css({background:"none"});for(b.triggerMethod.call(a,"show"),b.triggerMethod.call(this,"show",a),this.currentView=a,m=this.modals,i=0,k=m.length;k>i;i++)e=m[i],e.undelegateModalEvents();return a.on("modal:close",this.close),this.modals.push(a),this.zIndex++},f.prototype.close=function(){var a,c;return c=this.currentView,c&&!c.isClosed?(c.close?c.close():c.remove&&c.remove(),b.triggerMethod.call(c,"close"),b.triggerMethod.call(this,"close",c),c.off("modal:close",this.close),this.modals.splice(_.indexOf(this.modals,c),1),this.zIndex--,this.currentView=this.modals[this.zIndex-1],a=_.last(this.modals),a&&(a.$el.removeAttr("style"),a.modalEl.addClass(""+a.prefix+"-modal--stacked-reverse"),_.delay(function(){return a.modalEl.removeClass(""+a.prefix+"-modal--stacked")},300),0!==this.zIndex)?a.delegateModalEvents():void 0):void 0},f.prototype.closeAll=function(){var a,b,c,d,e;for(d=this.modals,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.close());return e},f}(b.Region)})}).call(this);